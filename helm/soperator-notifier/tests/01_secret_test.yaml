suite: test secret creation
release:
  name: test-name
  namespace: test-ns
templates:
  - templates/01_secret.yml
set:
  nameOverride: son
  slack:
    webhookUrl: &webhookUrl https://hooks.slack.com/services/XXXXXXXXXXX/YYYYYYYYYYY/ZZZZZZZZZZZZZZZZZZZZZZZZ

tests:
  - it: should render metadata
    asserts:
      - equal:
          path: metadata.name
          value: son-slack-webhook

  - it: should render secret value
    asserts:
      - equal:
          path: stringData["url"]
          value: *webhookUrl
